<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Свадьба Владислава и Елизаветы | 20.06.2026</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Manrope:wght@300;400;500;600&family=Prata&family=Great+Vibes&family=Cormorant:ital,wght@0,400;0,600;1,400&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="./css/main.css">

    <script src="https://api-maps.yandex.ru/2.1/?apikey=&lang=ru_RU" type="text/javascript"></script>
</head>
<body>
    <audio id="bg-music" src="./assets/audio/background_music.mp3" preload="auto" loop></audio>
    <button class="audio-toggle" id="audio-toggle" type="button" aria-pressed="false" aria-label="Включить музыку">
        <span class="material-symbols-outlined audio-toggle__icon">volume_off</span>
    </button>

    <div class="slides-container">
        <!-- Первый слайд: Конверт с приглашением -->
        <section class="slide slide--active" id="slide-1">
            <div class="container-envelope">
                <div class="invitation-text-top">Приглашаем Вас, Иван</div>
                <div class="envelope-wrapper">
                    <div class="envelope">
                        <div class="letter">
                            <div class="letter-content">
                                <h2 class="letter-title">Свадьба</h2>
                                <p class="letter-names">Владислава и Елизаветы</p>
                                <p class="letter-date">20 июня 2026</p>
                            </div>
                        </div>
                    </div>
                    <div class="heart"></div>
                </div>
            </div>
            <button class="slide__arrow" id="scroll-to-content" aria-label="Перейти к основному содержимому">
                <span class="material-symbols-outlined">keyboard_arrow_down</span>
            </button>
        </section>
    </div>

    <header class="hero" id="top" style="display: none;">
        <div class="hero__overlay"></div>
        <div class="hero__content">
            <h1 class="hero__names ">
                <span>Владислав</span>
                <span class="hero__amp">&</span>
                <span>Елизавета</span>
            </h1>
            <p class="hero__date">20 июня 2026</p>
            <p class="hero__city">Ростов-на-Дону</p>
        </div>
    </header>

    <div class="stack">
        <section class="sheet" id="welcome">
            <h2>Мы женимся!</h2>
            <p>20 июня 2026 года состоится один из самых важных и особенных дней в нашей жизни, который принесёт ещё больше счастья и любви.</p>
            <p>В этот день мы хотим оказаться в окружении близких нам людей, поэтому приглашаем Вас разделить с нами это событие!</p>
        </section>

        <section class="sheet" id="location">
            <h2 class="eyebrow">Локация</h2>
            <p>Ресторан «Усадьба Голицыных»</p>
            <p class="muted">адрес:</p>
            <p>г. Ростов-на-Дону, ул. Левобережная, 3А</p>
            <p>Мы подготовили карту, чтобы вы точно добрались и порадовали нас своим присутствием.</p>
            <div class="map-wrapper">
                <div id="map"></div>
            </div>
            <div class="button-row">
                <a class="btn" href="https://yandex.ru/maps/?pt=39.809,47.217321&z=16&l=map" target="_blank" rel="noopener noreferrer">Яндекс Карты</a>
                <a class="btn btn--ghost" href="https://maps.apple.com/?q=47.217321,39.809" target="_blank" rel="noopener noreferrer">Apple Maps</a>
            </div>
        </section>

        <section class="sheet" id="timing">
            <h2>Как пройдёт день</h2>
            <ul class="timeline">
                <li>
                    <span class="time">15:00</span>
                    <span class="timeline-icon material-symbols-outlined">groups</span>
                    <span class="event">Сбор гостей</span>
                </li>
                <li>
                    <span class="time">15:30</span>
                    <span class="timeline-icon material-symbols-outlined">favorite</span>
                    <span class="event">Церемония бракосочетания</span>
                </li>
                <li>
                    <span class="time">16:00</span>
                    <span class="timeline-icon material-symbols-outlined">restaurant</span>
                    <span class="event">Банкет и празднование</span>
                </li>
                <li>
                    <span class="time">21:45</span>
                    <span class="timeline-icon material-symbols-outlined">celebration</span>
                    <span class="event">Завершение официальной части</span>
                </li>
                <li>
                    <span class="time">22:00</span>
                    <span class="timeline-icon material-symbols-outlined">nightlife</span>
                    <span class="event">Дискотека</span>
                </li>
            </ul>
        </section>

        <section class="sheet" id="dress-code">
            <h2>Дресс-код</h2>
            <p>Для нас самое главное - Ваше присутствие !</p>
            <p>Но мы будем очень рады видеть джентльменов в деловом или классическом стиле. Дам — в образах приглушённых пастельных тонов.</p>
            <p>Просим воздержаться от ярких и кислотных оттенков, а белый цвет оставить невесте.</p>
        </section>

        <section class="sheet" id="details">
            <h2>Немного важных слов</h2>
            <p>Мы знаем, что на свадьбах принято дарить цветы, но мы не успеем насладиться их красотой, ведь они так быстро завянут! Вместо букета мы будем рады, если Вы оформите цветочную подписку. Каждую неделю будем получать новый букет от вас, чтобы продлить наш праздник.</p>
            <a class="btn btn--florist" href="https://wa.me/НОМЕР_ФЛОРИСТА?text=Здравствуйте!%20Хочу%20оформить%20цветочную%20подписку%20для%20Владислава%20и%20Елизаветы" target="_blank" rel="noopener noreferrer">
                <span class="material-symbols-outlined btn-icon">local_florist</span>
                Заказать цветочную подписку
            </a>
            <p>Ваши улыбки и смех подарят нам незабываемое счастье в этот день, а пожелания в конвертах помогут осуществить наши мечты!</p>
            <p>Мы с теплотой относимся к Вашим деткам, но приняли решение сделать нашу свадьбу праздником только для взрослых. Пожалуйста, оставьте детей в надежных руках. Спасибо за понимание!</p>
        </section>

        <section class="sheet" id="contact">
            <h2>Связь с ведущим</h2>
            <p>Если Вы хотите сделать нам сюрприз, свяжитесь с ведущим нашего мероприятия:</p>
            <div class="contact-lead">
                <p class="contact-name">Назар</p>
                <a class="contact-phone" href="tel:+79508611483">+7 950 861 1483</a>
            </div>
            <a class="btn btn--contact" href="https://wa.me/79508611483" target="_blank" rel="noopener noreferrer">Перейти в WhatsApp</a>
        </section>

        <section class="sheet" id="rsvp">
            <h2>Анкета гостя</h2>
            <p>Пожалуйста, сообщите нам о своём решении до 15.04.2026.</p>
            <form id="rsvp-form" class="rsvp-form">
                <label class="form-card">
                    <span>Ваше имя и фамилия *</span>
                    <input type="text" id="guestName" name="guestName" placeholder="Введите имя и фамилию" required>
                </label>
                <fieldset class="form-card">
                    <legend>Подтвердите своё присутствие *</legend>
                    <label class="radio">
                        <input type="radio" name="attendance" value="Обязательно буду" required>
                        <span>Обязательно буду</span>
                    </label>
                    <label class="radio">
                        <input type="radio" name="attendance" value="К сожалению, не смогу">
                        <span>К сожалению, не смогу</span>
                    </label>
                </fieldset>
                <div class="form-card form-card--actions">
                    <button type="submit" class="btn">Отправить</button>
                </div>
            </form>
        </section>

        <section class="sheet" id="save-date">
            <p class="eyebrow">Сохраните дату</p>
            <h2>До торжества осталось</h2>
            <div class="countdown" aria-label="Обратный отсчёт до свадебного дня">
                <div class="countdown__item">
                    <span id="count-days">0</span>
                    <span>дней</span>
                </div>
                <div class="countdown__item">
                    <span id="count-hours">0</span>
                    <span>часов</span>
                </div>
                <div class="countdown__item">
                    <span id="count-minutes">0</span>
                    <span>минут</span>
                </div>
                <div class="countdown__item">
                    <span id="count-seconds">0</span>
                    <span>секунд</span>
                </div>
            </div>
            <p class="muted" style="margin-top: 2rem;">Добавьте событие в свой календарь:</p>
            <div class="button-row">
                <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=%D0%A1%D0%B2%D0%B0%D0%B4%D1%8C%D0%B1%D0%B0+%D0%92%D0%BB%D0%B0%D0%B4%D0%B8%D1%81%D0%BB%D0%B0%D0%B2%D0%B0+%D0%B8+%D0%95%D0%BB%D0%B8%D0%B7%D0%B0%D0%B2%D0%B5%D1%82%D1%8B&dates=20260620T120000Z/20260620T190000Z&details=%D0%A1%D0%B2%D0%B0%D0%B4%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F+%D1%86%D0%B5%D1%80%D0%B5%D0%BC%D0%BE%D0%BD%D0%B8%D1%8F+%D0%B8+%D0%B1%D0%B0%D0%BD%D0%BA%D0%B5%D1%82&location=%D0%A0%D0%B5%D1%81%D1%82%D0%BE%D1%80%D0%B0%D0%BD+%C2%AB%D0%A3%D1%81%D0%B0%D0%B4%D1%8C%D0%B1%D0%B0+%D0%93%D0%BE%D0%BB%D0%B8%D1%86%D1%8B%D0%BD%D1%8B%D1%85%C2%BB%2C+%D0%A0%D0%BE%D1%81%D1%82%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%94%D0%BE%D0%BD%D1%83%2C+%D1%83%D0%BB.+%D0%9B%D0%B5%D0%B2%D0%BE%D0%B1%D0%B5%D1%80%D0%B5%D0%B6%D0%BD%D0%B0%D1%8F%2C+3%D0%90" target="_blank" rel="noopener noreferrer">Google Calendar</a>
                <a class="btn btn--ghost" href="data:text/calendar;charset=utf-8,BEGIN:VCALENDAR%0AVERSION:2.0%0ABEGIN:VEVENT%0ADTSTART:20260620T120000Z%0ADTEND:20260620T190000Z%0ASUMMARY:Свадьба Владислава и Елизаветы%0ADESCRIPTION:Свадебная церемония и банкет%0ALOCATION:Ресторан «Усадьба Голицыных»%2C Ростов-на-Дону%2C ул. Левобережная%2C 3А%0AEND:VEVENT%0AEND:VCALENDAR" download="wedding.ics">Apple Calendar</a>
            </div>
        </section>

        <footer class="sheet sheet--footer">
            <p>Ваши Владислав и Елизавета</p>
            <a href="#slide-1">Вернуться наверх</a>
        </footer>
    </div>

    <script>
        // Персонализация приглашения из URL параметра
        (function () {
            var invitationText = document.querySelector('.invitation-text-top');
            if (!invitationText) return;

            var urlParams = new URLSearchParams(window.location.search);
            var guestName = urlParams.get('name') || urlParams.get('payload');

            if (guestName) {
                // Декодируем имя на случай если оно закодировано в URL
                guestName = decodeURIComponent(guestName);
                invitationText.textContent = 'Приглашаем Вас, ' + guestName;
            }
        })();

        // Управление конвертом (точно как в референсе)
        (function () {
            var envelopeWrapper = document.querySelector('.envelope-wrapper');
            if (envelopeWrapper) {
                envelopeWrapper.addEventListener('click', function () {
                    envelopeWrapper.classList.toggle('flap');
                });
            }
        })();

        ymaps.ready(function () {
            var mapElement = document.getElementById('map');
            if (!mapElement) return;

            var map = new ymaps.Map('map', {
                center: [47.217321, 39.809],
                zoom: 16,
                controls: ['zoomControl']
            });

            var placemark = new ymaps.Placemark([47.217321, 39.809], {
                balloonContentHeader: 'Ресторан «Усадьба Голицыных»',
                balloonContentBody: 'г. Ростов-на-Дону, ул. Левобережная, 3А'
            }, {
                preset: 'islands#redDotIcon'
            });

            map.geoObjects.add(placemark);
            map.behaviors.disable('scrollZoom');
        });

        (function () {
            var weddingDate = new Date('2026-06-20T15:00:00');
            var days = document.getElementById('count-days');
            var hours = document.getElementById('count-hours');
            var minutes = document.getElementById('count-minutes');
            var seconds = document.getElementById('count-seconds');
            if (!days) return;

            function updateCountdown() {
                var now = new Date();
                var diff = weddingDate - now;
                if (diff <= 0) {
                    days.textContent = hours.textContent = minutes.textContent = seconds.textContent = '0';
                    return;
                }
                days.textContent = Math.floor(diff / (1000 * 60 * 60 * 24));
                hours.textContent = Math.floor(diff / (1000 * 60 * 60) % 24);
                minutes.textContent = Math.floor(diff / (1000 * 60) % 60);
                seconds.textContent = Math.floor(diff / 1000 % 60);
            }

            updateCountdown();
            setInterval(updateCountdown, 1000);
        })();

        (function () {
            var form = document.getElementById('rsvp-form');
            if (!form) return;

            form.addEventListener('submit', function (event) {
                event.preventDefault();

                var guestName = form.guestName.value.trim();
                var attendance = form.querySelector('input[name="attendance"]:checked').value;
                var submitButton = form.querySelector('button[type="submit"]');

                // Отключаем кнопку и меняем текст
                submitButton.disabled = true;
                submitButton.textContent = 'Отправка...';

                // URL вашего Google Apps Script
                var scriptUrl = 'https://script.google.com/macros/s/AKfycbwdWzRxHzy0KyYv6Kmnz-eijjB6KOmcHMMitBcwAw6eNwcUMQkCAA1wcJ52dpkdD3jidQ/exec';

                // Отправляем данные
                fetch(scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: guestName,
                        attendance: attendance
                    })
                }).then(function() {
                    var message = attendance === 'Обязательно буду'
                        ? 'Спасибо! Мы очень рады, что вы будете с нами.'
                        : 'Спасибо за ответ. Будем скучать!';

                    // Заменяем кнопку на сообщение
                    var actionsDiv = submitButton.parentElement;
                    actionsDiv.innerHTML = '<p style="text-align: center; color: var(--accent); font-weight: 500; margin: 0;">' + message + '</p>';
                }).catch(function(error) {
                    // Заменяем кнопку на сообщение об успехе
                    var actionsDiv = submitButton.parentElement;
                    actionsDiv.innerHTML = '<p style="text-align: center; color: var(--accent); font-weight: 500; margin: 0;">Спасибо! Ваш ответ отправлен.</p>';
                });
            });
        })();

        (function () {
            var stack = document.querySelector('.stack');
            if (!stack) return;

            var observer = new IntersectionObserver(function (entries) {
                entries.forEach(function (entry) {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('stack--visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            observer.observe(stack);
        })();

        (function () {
            var timelineItems = document.querySelectorAll('.timeline li');
            if (!timelineItems.length) return;

            var observer = new IntersectionObserver(function (entries) {
                entries.forEach(function (entry) {
                    if (entry.isIntersecting) {
                        var index = Array.from(timelineItems).indexOf(entry.target);
                        setTimeout(function () {
                            entry.target.classList.add('timeline-item--visible');
                        }, index * 150);
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.2,
                rootMargin: '0px 0px -50px 0px'
            });

            timelineItems.forEach(function (item) {
                observer.observe(item);
            });
        })();

        (function () {
            var audio = document.getElementById('bg-music');
            var toggle = document.getElementById('audio-toggle');
            if (!audio || !toggle) return;

            var icon = toggle.querySelector('.audio-toggle__icon');
            var activeClass = 'audio-toggle--active';

            audio.volume = 0.45;

            function setState(isPlaying) {
                toggle.setAttribute('aria-pressed', isPlaying);
                toggle.setAttribute('aria-label', isPlaying ? 'Остановить музыку' : 'Включить музыку');
                toggle.classList.toggle(activeClass, isPlaying);
                if (icon) {
                    icon.textContent = isPlaying ? 'volume_up' : 'volume_off';
                }
            }

            function tryPlay() {
                return audio.play().then(function () {
                    setState(true);
                }).catch(function () {
                    setState(false);
                });
            }

            toggle.addEventListener('click', function () {
                if (audio.paused) {
                    tryPlay();
                } else {
                    audio.pause();
                    setState(false);
                }
            });

            document.addEventListener('visibilitychange', function () {
                if (document.hidden && !audio.paused) {
                    audio.pause();
                    setState(false);
                }
            });

            tryPlay();
        })();
    </script>
</body>
</html>
